
<!DOCTYPE html>

<html>
<head>
    <title>CS 407 Lab Tutorial</title><!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
    <link href="css/tutorial.css" rel="stylesheet" />
    <link href="css/lightbox.css" rel="stylesheet" />
</head>
<div class="container">
<body data-spy="scroll" data-target=".sidebar">
    <div class="container">
        <div class="row">
            <div class="span3 sidebar">
                <ul class="nav nav-list sidenav" data-spy="affix">
                    <!-- <li class="nav-header">List header</li> -->

                    <li class="active"><a href="#setup">Environment Setup</a></li>

                    <li><a href="#create">Creating a Project</a></li>

                    <li><a href="#import_assets">Import Assets</a></li>

                    <li><a href="#add_navigation">Adding a Navigation Controller</a></li>
                    
                    <li><a href="#custom_cell">Creating a custom UICollectionViewCell</a></li>
                    
                    <li><a href="#modify_controller">Modifying the Controller</a></li>
                    
                    <li><a href="#passing_information">Passing Information Between Views</a></li>
                </ul>
            </div>

            <div class="span8">
                <section id="setup">
                    <div class="page-header">
                        <h1>Environment Setup</h1><span class="label label-important">Important</span> There is currently an issue with building applications with Xcode on CSL machines and you must run the following command as a workaround until CSL resolves the issue. You do not need to do this step if you are using your own machine. <script src="https://gist.github.com/7688702a8d47b1e9cedb.js" type="text/javascript">
</script> There is one additional step required, but we will make that change after the project has been created.
                    </div>
                </section>

                <section id="create">
                    <div class="page-header">
                        <h1>Creating a Project</h1>

                        <ol>
                            <li>Create a new project by navigating to File -&gt; New -&gt; Project...

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/new_project.png" class="thumbnail" rel="lightbox"><img src="img/new_project.png"></a></li>
                                </ul>
                            </li>

                            <li>Under the list of project options, choose a "Single View Application"

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/single_view.png" class="thumbnail" rel="lightbox"><img src="img/single_view.png"></a></li>
                                </ul>
                            </li>

                            <li>Choose a name for your application. Ensure "iPhone" is selected in the Devices dropdown, and that storyboards and ARC are enabled.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/name_application.png" class="thumbnail" rel="lightbox"><img src="img/name_application.png"></a></li>
                                </ul>
                            </li>

                            <li>Finally, choose where you want to save your application and hit "Create"! For those unfamiliar with git, I highly recommend it for saving progress. See <a href="http://try.github.com/">http://try.github.com/</a> for more information.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/project_dest.png" class="thumbnail" rel="lightbox"><img src="img/project_dest.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>
                                <p><span class="label label-important">Important</span> This is the second half of our workaround for CSL machines. You do not need to do this step if your are using your own machine.</p>Navigate to File -&gt; Project Settings...

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/project_settings.png" class="thumbnail" rel="lightbox"><img src="img/project_settings.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>Change the "Derived Data Location" to "Custom" in the dropdown menu, and replace the path with "/scratch".

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/derived_data_location.png" class="thumbnail" rel="lightbox"><img src="img/derived_data_location.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>Click the "Run" button to launch the simulator.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/run_application.png" class="thumbnail" rel="lightbox"><img src="img/run_application.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>If everything is setup correctly, the simulator should launch show a blank application.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/empty_application_simulator.png" class="thumbnail" rel="lightbox"><img src="img/empty_application_simulator.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </section>

                <section id="import_assets">
                    <div class="page-header">
                        <h1>Importing Assets</h1>

                        <ol>
                            <li>Download the images we are providing here: <a href="http://cs.wisc.edu/~griepent/cs407/instagram-images.zip">http://cs.wisc.edu/~griepent/cs407/instagram-images.zip</a></li>

                            <li>Uncompress the archive and drag the "Images" folder to the project navigator.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/import_images.png" class="thumbnail" rel="lightbox"><img src="img/import_images.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>You should receive the following prompt. Be sure to copy the images to your project.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/copy_images_to_project.png" class="thumbnail" rel="lightbox"><img src="img/copy_images_to_project.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>Your project navigator should now have the images added to the project.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/pn_after_import.png" class="thumbnail" rel="lightbox"><img src="img/pn_after_import.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </section>

                <section id="add_navigation">
                    <div class="page-header">
                        <h1>Adding a Navigation Controller</h1>

                        <p>We want to be able to transition between selected images and our main view (a UICollectionView) easily. This can be accomplished with a Navigation controller.</p>

                        <ol>
                            <li>Select MainStoryboard.storyboard. This will bring up our interface builder. The main idea behind storyboards is that you can see the application flow visibly. This will become apparent as we progress in building our app.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/select_storyboard.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/select_storyboard.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>Select the only view in the storyboard and select the delete key.

                                <div class="alert alert-info">
                                    <h4>Tip!</h4>Double-clicking while in storyboard will toggle zoom. You must double-click grid area if you are already zoomed in and want to zoom out.
                                </div>
                            </li>

                            <li>Drag a Navigation Controller from the Object Library and drop it on the storyboard.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/add_navigation.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/add_navigation.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>

                            <li>Notice the arrow pointing at the Navigation Controller. This arrow indicates the first view to be shown when the application launches. You can click-drag the arrow if you ever need to change the starting view.

                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/storyboard_arrow.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/storyboard_arrow.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>We don't want a Table View Controller, so we should select it and delete it.
                            <div class="alert alert-error">
                            	<h4>Careful!</h4> You want to make sure you select the Table View Controller. It's possible to accidentally select the Table View Cell, the Navigation Item (the bar at the top), or the Table View itself. If you double-click to zoom out it only lets you select the entire Table View Controller. It will have a blue border surrounding the view once you have selected the Table View Controller.
                            </div>
                            </li>
                            <li>Drag a Collection View Controller (located above the Navigation Controller) from the object library onto the storyboard. Xcode has snap guide lines to make it easy to align with other views.
                            </li>
                            <li>We now want to represent that the Collection View is a sub-view of the Navigation Controller. We can do that by Control-clicking the Navigation Controller and dragging the line that appears to the Collection View.
                            	<ul class="thumbnails">
                                    <li class="span4"><a href="img/navigation_root_view.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/navigation_root_view.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>We are then presented with a menu of what kind of association this should be. We want the Collection View to be the Navigation Controller's root view controller, so choose that.
                            	<ul class="thumbnails">
                                    <li class="span4"><a href="img/relationship_segue.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/relationship_segue.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>We now have the same type of connector linking the two views together that the Table View Controller originally had. Notice how the space required for the navigation bar is also reflected in our collection view.
                            	<ul class="thumbnails">
                                    <li class="span4"><a href="img/collection_view_with_navigation.png" class="thumbnail" rel="lightbox"><img src="img/collection_view_with_navigation.png" class="img-polaroid"></a></li>
                                </ul>
                                <div class="alert alert-info">
                                    <h4>Tip!</h4>If you zoom in and double-click on the navigation bar, you can give the view a title!
                                </div>
                            </li>
                            <li>If we run our application now, we still see a blank view, but this time there's a navigation bar at the top!
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/navigation_simulator.png" class="thumbnail" rel="lightbox"><img src="img/navigation_simulator.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </section>
                <section id="custom_cell">
                    <div class="page-header">
                        <h1>Creating a custom UICollectionViewCell</h1>

                        <p>If we look at the documentation for <a href="http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewCell_class/Reference/Reference.html">UICollectionViewCell</a>, there isn't much out-of-the-box support like <a href="http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html">UITableViewCells</a>, which have <code>textLabel</code> and <code>imageView</code> properties we can use. We will have to subclass UICollectionViewCell. Luckily, that is simple to do.</p>

                        <ol>
                            <li>Let's create the file that will have our subclass of UICollectionViewCell. Go to File -> New -> File...
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/file_new_file.png" class="thumbnail" rel="lightbox"><img src="img/file_new_file.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>Select Objective-C Class
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/objc_class.png" class="thumbnail" rel="lightbox"><img src="img/objc_class.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>Specify the name of the class and set its subclass to be UICollectionViewCell.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/image_cell_class_create.png" class="thumbnail" rel="lightbox"><img src="img/image_cell_class_create.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>You may have noticed in the previous section a square within the Collection View. It's actually a UICollectionViewCell, and we can use it to dictate what goes in our subclassed view. First we should indicate to interface builder that this is an instance of our subclass. We can do this by selecting the UICollectionViewCell and selecting the "Identity Inspector" tab on the right side of Xcode. You should see "UICollectionViewCell" grayed out in the Class field.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/uicollectionviewcell_identity.png" class="thumbnail" rel="lightbox"><img src="img/uicollectionviewcell_identity.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>Fill that field in with our ImageCell class.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/imagecell_identity.png" class="thumbnail" rel="lightbox"><img src="img/imagecell_identity.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>Find the Image View object in the object library and drag it into our subclassed UICollectionViewCell. You can verify the placement by clicking on the Size Inspector tab. Notice how the X and Y values are both 0.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/imageview_positioning.png" class="thumbnail" rel="lightbox"><img src="img/imageview_positioning.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>How can we programmatically set the image of the Image View? We can do this by creating what is called an IBOutlet. The easiest way to do this is first switch to the assistant editor mode. You will now have UI components on the left, and code on the right
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/assistant_editor.png" class="thumbnail" rel="lightbox"><img src="img/assistant_editor.png" class="img-polaroid"></a></li>
                                    <li class="span4"><a href="img/assistant_editor_preview.png" class="thumbnail" rel="lightbox"><img src="img/assistant_editor_preview.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>Control-click drag from the Image View to ImageCell.h on the right-hand side.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/drag_iboutlet.png" class="thumbnail" rel="lightbox"><img src="img/drag_iboutlet.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>Give the outlet a name of "imageView" and click "Connect".
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/imageView_outlet.png" class="thumbnail" rel="lightbox"><img src="img/imageView_outlet.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>You should see the following code generated:
                            <script src="https://gist.github.com/a99f8a4b725480aca550.js"></script>
                            Now whenever you have an instance of ImageCell, you can set the image that is displayed by using the <code>imageView</code> property.
                            </li>
                            <li>We also need to set a reuse identifier for our Collection View Cell. Switch back to the standard editor mode and set the reuse identifier to "ImageCell" in the attributes inspector tab for the UICollectionViewCell (you may have to select the object from the menu on the left if you are only selecting the Image View). The value itself doesn't have to match the class name, it only needs to be consistent with a reuse identifier you use when you implement <code>collectionView:cellForItemAtIndexPath:</code>.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/reuse_identifier.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/reuse_identifier.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </section>
                <section id="modify_controller">
                    <div class="page-header">
                        <h1>Modifying the Controller</h1>
                        <ol>
                            <li>In <code>ViewController.h</code> change the class' parent class from <code>UIViewController</code> to <code>UICollectionViewController</code></li>
                            <li>Return to your storyboard and select the Collection View Controller. In the identity inspector tab, change the class to be a ViewController (our subclass of a UICollectionViewController).
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/collectionview_custom_class.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/collectionview_custom_class.png" class="img-polaroid"></a></li>
                                </ul>
                                <div class="alert alert-info">
                                    <h4>Tip!</h4>Because we are subclassing UICollectionViewController, we do not need to set its <code>delegate</code> and <code>dataSource</code> properties. This is done automatically. We could have left our ViewController class as a UIViewController and indicated it implemented the UICollectionViewDelegate and UICollectionViewDataSource protocols in <code>ViewController.h</code>, but we would have had to make those <code>delegate</code> and <code>dataSource</code> bindings in our storyboard with the Collection View and the Collection View Controller (i.e., Control-click and drag).
                                </div>
                            </li>
                            <li>Add <code>#import "ImageCell.h"</code> to your <code>ViewController.h</code> file</li>
                            <li>Add the following methods to <code>ViewController.m</code>:
                            	<script src="https://gist.github.com/d08df44cd2c801e35ee7.js"></script>
                            	<div class="alert">
                                    <h4>Warning!</h4>The number of cells is hardcoded in this case, but it would most likely need to be dynamic. Think about the controller having an array of objects and returning the size of the array instead.
                                </div>
                            </li>
                            <li>If you run your application, this is what you should see.
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/collectionview_simulator.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/collectionview_simulator.png" class="img-polaroid"></a></li>
                                </ul>
                            </li>
                            <li>That looks pretty good! We didn't have to write much code to achieve this either. One thing that is apparent is that the images look really small. The thumbnails are actually 150x150px so we can make them larger. We can do this by going to our storyboard, selecting the Collection View (not the controller), and changing the cell size in the size inspector. We can see our changes in the next build!
                                <ul class="thumbnails">
                                    <li class="span4"><a href="img/larger_cell.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/larger_cell.png" class="img-polaroid"></a></li>
                                    <li class="span4"><a href="img/larger_cell_simulator.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/larger_cell_simulator.png" class="img-polaroid"></a></li>

                                </ul>
                            </li>
                        </ol>
                    </div>
                </section>
                <section id="passing_information">
                    <div class="page-header">
                        <h1>Passing Information Between Views</h1>
                        <p>This section will show you how to respond to a user's tap, transition to a new view, and pass information between views. Most of this section will be re-doing bits and pieces of previous sections so the instructions will not be as detailed unless necessary.</p>
                        <ol>
                            <li>Create a new class and have it be a subclass of UIViewController. A possible name could be FullSizeImageViewController.</li>
                            <li>Go to storyboard and drag a new View Controller onto the grid. Set its class to the name of the class we just created (FullSizeImageViewController in my case).</li>
                            <li>Drag and drop an Image View on this View Controller. It should automatically resize itself to fit the whole view. If not, manually adjust it in the size inspector tab.</li>
                            <li>Create an IBOutlet and call it <code>imageView</code>.</li>
                            <li>Add the following property to <code>FullSizeImageViewController.h</code>:
                            <script src="https://gist.github.com/45fbf1d4d7f4aa6133b2.js"></script>
                            </li>
                            <li>Add the corresponding @synthesize to <code>FullSizeImageViewController.m</code>.
                            </li>
                            <li>Control-click from the Collection View Cell to the new view we just created. Select "push" from the list of options. We just created what is called a segue (pronounced "Segway"). These indicate possible transitions for our application in storyboard.
                            	<ul class="thumbnails">
                                    <li class="span4"><a href="img/segue.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/segue.png" class="img-polaroid"></a></li>
                                    <li class="span4"><a href="img/segue_push.png" class="thumbnail" rel="lightbox" rel="lightbox"><img src="img/segue_push.png" class="img-polaroid"></a></li>

                               </ul>
                            </li>
                            <li>Click the transition icon (<img src="img/transition_icon.png" />). Go to the attributes inspector and give it an identifier, <code>ShowFullImage</code> would be appropriate. This is useful when we have multiple ways to transition to different views (i.e., a button can trigger a segue). These identifiers give hints as to what transition should happen.
                            </li>
                            <li>Add <code>#import "FullSizeImageViewController.h"</code> to your <code>ViewController.h</code> file.
                            </li>
                            <li>Add the following method to <code>ViewController.m</code>:
                            <script src="https://gist.github.com/f36b0367bcb6777b612b.js"></script>
                            
                            The <code>sender</code> variable is the Collection View Cell that has been tapped. We can figure out its index and pass that along to the next view. We obtain a pointer of the next view by calling <code>[segue destinationViewController]</code>.
                                <div class="alert">
                                    <h4>Warning!</h4>This assignment should normally be a class. Because we're only passing one string, we wouldn't reduce the amount of code here. If you have more than one field to pass, using a class here would prevent you from having to update FullSizeImageViewController's properties and this method every time you add/change a field.
                                </div>
                            </li>
                            <li>Add the following line inside the <code>viewDidLoad</code> method in <code>FullSizeImageViewController.m</code>:
                            <script src="https://gist.github.com/41e7cf6dd9416597eba7.js"></script>
                            </li>
                            <li>If you build and run your app, tapping on an image should transition to the full sized image!</li>
                            <li>One last tweak: Some of the images look stretched. You can fix this by selecting the Image View in storyboard and change the mode in the attributes inspector tab to be "Aspect Fit" instead of "Scale to Fill". If the white background color is bothersome, it can also be changed at this tab.
                        </ol>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript">
</script><script src="js/bootstrap.min.js" type="text/javascript">
</script><script src="js/lightbox.js"></script>
</body>
</html>
